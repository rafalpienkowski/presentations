<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Z pamiętnika modelarza">
    <meta name="author" content="Rafal Pienkowski">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Z pamiętnika modelarza</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/white.css">
    <link rel="stylesheet" href="plugin/highlight/vs.css">

</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section data-auto-animate>
                <h1>
                    Opowieści modelarza
                </h1>
                <h2>
                    Rafał Pieńkowski
                </h2>
                <aside class="notes">
                    <ul>
                    </ul>
                </aside>
            </section>

            <section data-auto-animate>
                <h1>
                    Opowieści modelarza
                </h1>
                <h2>
                    zamki, wysłannicy i współpraca
                </h2>
            </section>

            <section>
                <h1>
                    Cel prezentacji
                </h1>
                <aside class="notes">
                    <ul>
                        <li>Prezentacja ma zmotywować do przemyśleń</li>
                        <li>Pokazac mniej znane podejście do modelowania domeny</li>
                        <li>Nie ma na celu przekonania do konkretnego rozwiązania</li>
                        <li>Zobaczymy potęgę metafory ("Metafory w naszym życiu")</li>
                    </ul>
                </aside>
            </section>

            <section>
                <h1>Prolog</h1>
            </section>

            <section>
                <div style="position: relative; width: 100%; height: 700px;">
                    <img src="./img/m-kopa.png"
                        style="position: absolute; transform: rotate(-8deg); height: 300px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); left: 5%; top: 25%; z-index: 2;">
                    <img src="./img/datacenter_servers.jpg"
                        style="position: absolute; transform: rotate(8deg); height: 300px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); right: 5%; top: 25%; z-index: 2;">
                    <img src="./img/chees.jpeg"
                        style="position: absolute; transform: translateX(-50%) rotate(-3deg); height: 300px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); left: 50%; bottom: -10%; z-index: 1;">
                </div>
                <aside class="notes">
                    <ul>
                        <li>W obecnej pracy mam możliwość pracować z EDA i mikroserwisami</li>
                    </ul>
                </aside>
            </section>

            <section>
                <h1>
                    Rozdział 1
                </h1>

                <aside class="notes">
                    <ul>
                        <li>DDD</li>
                    </ul>
                </aside>
            </section>

            <section>
                <div
                    style="position: relative; width: 100%; height: 600px; display: flex; justify-content: center; align-items: center;">
                    <img src="./img/ddd-blue-book-cover.jpg"
                        style="position: absolute; transform: rotate(-8deg); height: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); left: 25%; top: 10%;">
                    <img src="./img/ddd-red-book-cover.jpg"
                        style="position: absolute; transform: rotate(8deg); height: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); right: 25%; top: 10%;">
                    <img src="./img/ddd-distilled-book-cover.jpg" class="fragment fade-up"
                        style="position: absolute; transform: rotate(-12deg); height: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); left: 18%; top: 12%;">
                    <img src="./img/ddd-learning-book-cover.jpg" class="fragment fade-up"
                        style="position: absolute; transform: rotate(15deg); height: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); right: 22%; top: 8%;">
                    <img src="./img/ddd-patterns-book-cover.jpg" class="fragment fade-up"
                        style="position: absolute; transform: rotate(-3deg); height: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); left: 42%; top: 15%;">
                </div>

                <aside class="notes">
                    <ul>
                        <li>Wprowadzanie nowy osób</li>
                        <li>Walka o definicje czym jest agregat</li>
                        <li>Skupienie się na taktycznych wzrocach</li>
                        <li>Wizyta na KanDDDynsky</li>
                    </ul>
                </aside>
            </section>

            <section data-background="./img/ddd-circle.png" data-background-size="80%">
            </section>

            <section data-background="./img/why.jpg" data-background-size="60%">
                <aside class="notes">
                    <ul>
                        <li>Wizyta na KanDDDynsky</li>
                        <li>Prosty człowiek</li>
                    </ul>
                </aside>
            </section>

            <section>
                    <h1>Rozdział 2</h1>
            </section>

            <section>
                Rysunek zamku. Zamek to może być moduł, aplikacja, jeden lub więcej współpracujących mikroserwisów itp.
                <aside class="notes">
                    <ul>
                        <li>Nie wierzymy obcym</li>
                        <li>Wewnątrz zamku mamy pełną kontrolę nad danymi i logiką biznesową</li>
                        <li>Dane na zewnątrz zamku są niezmienne</li>
                    </ul>
            </section>

            <section>
                Rysunek tego co w zamku najważniejsze (wyrocznia)
                <aside class="notes">
                    <ul>
                        <li>W zamku jest wyrocznia - źródło prawdy</li>
                        <li>Bronimy tego, co w zamku najważniejsze poprzez reguły i inne prawa</li>
                        <li>Jasna analogia do granicy</li>
                        <li>Gwarancja transakcyjności/kontekstu wewnątrz zamku</li>
                    </ul>
            </section>

            <section>
                Transakcje są wewnątrz zamku co wspoomaga skalowalność, dostępność i odporność na błędy.
            </section>

            <section>
                <h2>If you don’t trust your business partner you won’t share transactions with them."<h2>
                        <h4>
                            <a href="https://pathelland.substack.com/p/autonomous-computing-short-version"> PatHelland's
                                Autonomous Computing</a>
                        </h4>
                        <aside class="notes">
                            <ul>
                                <li>Zamek jest autonomiczny</li>
                                <li>Dane na zewnątrz zamku są niezmienne</li>
                            </ul>
            </section>

            <section>
                Jedyna opcja współpracy z zamkiem jest poprzez wysłanie wiadomości.
                Interfejs dostępu do zamku powinien być dobrze przemyślany
                Dodać informację o "A philosophy of Software Design" Johna Ousterhouta
            </section>

            <section>
                Przykład: Bankomat (dodać rysunek)
                <aside class="notes">
                    <ul>
                        <li>Zdefiniowane operacje</li>
                        <li>Nie udostępniamy połączenia do bazy danych</li>
                        <li>Potrzebny jest PIN</li>
                    </ul>
            </section>

            <section>
                Mozna przesunać do sekcji o współpracy.
                Słabo jest opisane, który zamek nadaje protokół komunikacji.
                Tutaj DDD (context map) może pomóc. Link do Michael Plod.
            </section>

            <section>
                Nie chcemy udostpępniać wszystkiego co mamy w zamku.
            </section>

            <section data-background="./img/whole-in-the-wall.jpg" data-background-size="100%">
            </section>

            <section>
                <h1>Rozdział 3<div class="fragment">Współpraca</div>
            </section>

            <section>
                Nie żyjemy w próżni, w celu osiągnienia celu (biznesowego) potrzebujemy współpracować.
                Dawniej biznes odbywał się przy pomocy atramentu i papieru (można dodać rysunek długopisu i papieru).
                <aside class="notes">
                    <ul>
                        <li>Przykład z życia: wnioski urzędowe, listy przewozowe, faktury</li>
                        <li>W naszym kontekście to wymiana wiadomości w czasie w celu osiągnięcia celu biznesowego</li>
                    </ul>
            </section>

            <section>
                Każdy druk miał swój unikalny number/sugnaturę, która pozwalała na jego identyfikację.
                <aside class="notes">
                    <ul>
                        <li>Sygnatura była niezmienna</li>
                    </ul>
                </aside>
            </section>

            <section>
                Wymieniamy niezmienne dane (identyfikatory, referencje) oraz komunikaty o zdarzeniach.

                Dodać rysunek tego jak tani jest storage obecnie - opowiedziec jaki to mialo wpływ na architekturę
                systemów

                Dane te są wykorzystywane to wywołania naszego interfejsu zamkowego.
                <aside class="notes">
                    <ul>
                        <li>Identyfiktor jest niezmienny</li>
                        <li>Może być naturalny lub wygenerowany</li>
                    </ul>
            </section>

            <section>
                Współpraca to wiadomości wysyłane pomiędzy zamkami w celu wykonania operacji biznesowej.
                Kolaboracja jest offline => bardzo ważne.
            </section>

            <section>
                Współpraca unika transakcji rozproszonych => wpływ na przepustowość, dostępność, skalowalność.
                Zamiast tego wysyłamy ciąg wiadomości asynchronicznych.
                <aside class="notes">
                    <ul>
                        <li>Transakcje rozproszone są kosztowne i zawodzne</li>
                        <li>Współpraca opiera się na asynchroniczności</li>
                        <li>Wchodzimy w świat eventual consistency</li>
                        <li>Wzorce typu rezerwacja zasobu, dostpępność itp.</li>
                    </ul>
            </section>

            <section>
                Wchodzą wyzwania związane z asynchronicznością (zwłaszcza w skomplikowanych procesach biznesowych):
                <ul>
                    <li>Idempotentność</li>
                    <li>Obsługa błędów</li>
                    <li>Kolejność wiadomości</li>
                    <li>Monitorowanie</li>
                    <li>Wersjonowanie</li>
                    <li>Itp.</li>
                </ul>
            </section>

            <section>
                Dane na zewnątrz zamku są:
                <ul>
                    <li>Niezmienne</li>
                    <li>Nie są częścią transakcji</li>
                    <li>Mają identyfikator</li>
                    <li>Mogą być wersjonowane (bo jest to obecnie tanie)</li>
                </ul>
                <aside class="notes">
                    Ciemna strona niezmienności:
                    <ul>
                        <li>Dane są zapisywane w wielu miejscach</li>
                        <li>Denormalizacja => smaczna ale tuczy</li>
                        <li>Poza zamkiem to "tylko" cache</li>
                    </ul>
            </section>

            <section>
                <h1>Rozdział 4<div class="fragment">Wysłannicy</div>
            </section>

            <section>
                <h1>Kim jest wysłannik?</h1>
                <aside class="notes">
                    <ul>
                        <li>"An emissary is a representative. It is person sent on a special mission as a diplomatic
                            representative. Unlike an ambassador, an emissary has NO authority. They can only play
                            nicely, suck-up, and try to ease the relationship."</li>
                    </ul>
                </aside>
            </section>

            <section>
                Zamek nie ufa wysłannikowi, ponieważ operuje on poza zamkiem. To użytkownik wysłannika decyduje co
                zrobić z danymi oraz authoryzuje
                operacje.

                Wysłannik ma dane per klient.
            </section>

            <section>
                Wysłannik może posiadać kopię danych klienta, które są znaczące z punktu widzenia procesu.
                Wysłannicy operują na niezmiennych danych referencyjnych. Zdjęcie katalogu produktów apart czy innej
                ikea.
            </section>

            <section>
                Przykład pyszne.pl albo klient do gry, albo doradca kredytowy (zbierał dane od klienta, ale po wyborze
                oferty to klient musiał sam złożyć wniosek w banku)
            </section>

            <section>
                Przykład klienta pocztowego - wiele zamków (serwerów pocztowych), wiele wysłanników (klientów pocztowych
                e.g. telefon, przeglądarka, program pocztowy)
            </section>


            <section>
                Wysłannicy mogą pracować offline. Mogą buforować dane podczas braku łączności co wspiera
                asynchroniczność, natomiast musi być obsłużone przez programistę. (zwykły bufor na wiadomości nie
                wystarczy)

                W przypadku długotrwałych operacji biznesowych (np. proces zakupowy) konieczne jest zapisywanie danych
                po obu stronach (zamek i wysłannik).
            </section>

            <section>
                Wewnątrz zamku operujemy za prowadzenie procesu odpowiedzialne są aktywności (ang. activities), któkt
                operują na zasobach (ang. resources) => np. dobra materialne, usługi itp.

                Aktywność może być wyzwalana przez:
                - wenętrzną wiadomość (np. zdarzenie domenowe)
                - zewnętrznla wiadomość (np. zdarzenie procesowe z wysłannika)
                - upływ czasu (np. timeout)

                Aktywność nie trwa wiecznie. Może być przerwana, wznowiona itp.
            </section>

            <section>
            </section>

            <section>
                Różne:
                <ul>
                    <li>Przeważnie wewnątrz zamku idziemy w orkiestrację, a poza w choreografię</li>
            </section>


            <section data-background="./img/seven-kingdoms.svg" data-background-size="contain"
                data-background-repeat="no-repeat" data-background-size="100%">
                <div
                    style="position: absolute; bottom: 0; right: 0; padding: 20px 30px; font-size: 0.5em; opacity: 0.7;">
                    Source: <a href="https://awoiaf.westeros.org/" target="_blank">A wiki of ice and fire</a>
                </div>
            </section>

            <section data-background="./img/customer.jpg" data-background-size="100%">
            </section>

            <section>
                <h1>Epilog</h1>
                To jest wzorzec do tworzenia skalowalnych systemów rozproszonych.
                Jak autonomia wspiera architekturę (nie tylko mikroserwisową).

                "An event is an immutable set of attributes with an identity."
                "Realiable systems have alwasy been built out of unreliable components."
            </section>

            <section>
                "All models are wrong, but some are useful." - George E.P. Box
            </section>

            <section>
                <h1>Zapraszam do dyskusji</h1>
            </section>

            <section>
                <h2>Linki</h2>
                <ul>
                    <li><a href="https://www.cidrdb.org/cidr2005/papers/P12.pdf">Data on the Outside versus Data
                            on the
                            Inside</a></li>
                    <li><a href="https://pathelland.substack.com/p/autonomous-computing-short-version">Autonomous
                            Computing (short version)</a></li>
                    <li><a href="https://queue.acm.org/detail.cfm?id=3314115">Identity by Any Other Name</a>
                    </li>
                    <li><a href="https://www.cidrdb.org/cidr2015/Papers/CIDR15_Paper16.pdf">Immutability Changes
                            Everything</a></li>
                    <li><a href="https://arxiv.org/pdf/0909.1788">Building on Quicksand</a></li>
                    <li><a href="https://queue.acm.org/detail.cfm?id=3314115">Identity by Another Name</a></li>
                    <li><a href="https://www.youtube.com/watch?v=k5i4sP9q2Lk">Introduction to Context Mapping - Michael
                            Plöd - DDD Europe 2022</a></li>
                    <li><a href="https://www.youtube.com/watch?v=VjtMt689ql8">Context Maps - a deep dive - Michael Plöd
                            - KanDDDinsky 2019</a></li>
                </ul>
            </section>

            <section>
                <h2>Link do ankietki</h2>
                <img data-src="./img/ankieta.png" height=600px>
            </section>

            <section>
                <h2>Link do prezentacj</h2>
                <img data-src="./img/link.png" height=600px>
            </section>

            <section data-auto-animate>
                <h1>Dziękuję</h1>
            </section>

            <script src="dist/reveal.js"></script>
            <script src="plugin/notes/notes.js"></script>
            <script src="plugin/markdown/markdown.js"></script>
            <script src="plugin/highlight/highlight.js"></script>
            <script>
                // More info about initialization & config:
                // - https://revealjs.com/initialization/
                // - https://revealjs.com/config/
                Reveal.initialize({
                    hash: true,
                    controls: false,
                    width: 1200,
                    height: 900,
                    progress: false,

                    // Learn about plugins: https://revealjs.com/plugins/
                    plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
                });
            </script>
</body>

</html>
